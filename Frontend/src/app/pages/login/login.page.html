<!-- src/app/pages/login/login.page.html -->
<ion-header>
  <ion-toolbar>
    <ion-title>Connexion</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <ion-list>

      <!-- Email -->
      <ion-item>
        <ion-icon slot="start" name="mail"></ion-icon>
        <ion-input formControlName="email" type="email" label="Email" label-placement="stacked"
          placeholder="you@example.com">
        </ion-input>
      </ion-item>
      <ion-note color="danger" *ngIf="email?.touched && email?.invalid">
        Entrez un email valide.
      </ion-note>

      <!-- Password -->
      <ion-item>
        <ion-icon slot="start" name="lock-closed"></ion-icon>
        <ion-input formControlName="password" [type]="showPwd ? 'text' : 'password'" label="Mot de passe"
          label-placement="stacked" placeholder="••••••••">
        </ion-input>
        <!-- Just toggles; does not submit the form -->
        <ion-button fill="clear" size="small" type="button" (click)="showPwd = !showPwd">
          <ion-icon [name]="showPwd ? 'eye-off' : 'eye'"></ion-icon>
        </ion-button>
      </ion-item>
      <ion-note color="danger" *ngIf="password?.touched && password?.invalid">
        Mot de passe (min 6 caractères).
      </ion-note>

    </ion-list>

    <!-- Backend error -->
    <ion-note color="danger" *ngIf="errorMsg" class="ion-margin-top">{{ errorMsg }}</ion-note>

    <!-- Submit -->
    <ion-button expand="block" type="submit" class="ion-margin-top">
      <ion-icon slot="start" name="log-in"></ion-icon>
      Se connecter
    </ion-button>

    <!-- Navigate to register -->
    <ion-button expand="block" fill="clear" type="button" (click)="goRegister()" routerDirection="forward">
      Créer un compte
    </ion-button>
  </form>
</ion-content>